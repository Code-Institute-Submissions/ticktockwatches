{% extends 'base.html' %}

{% load staticfiles %}

{% block title %}Home{% endblock %}

{% block content %}
<!--Product Title Image-->
<!-- <section class ="product-imgs">
    <div class="container-fluid title-container">
        <div class="row">
            <div class="col-12 product-title">
                <img class="responsive-img" src="{% static 'img/product-banner.jpg' %}" alt="title image">
            </div> 
        </div>
    </div> 
</section> -->
<!--Promotion banner -->

<section class = "container-fluid delivery-banner">
    <div class = "row">
      <div class = "col-12 text-center text-white banner">
        <i class ="pt-1 fas fa-truck" style="color:rgb(0, 128, 129);"></i>
        <p class = ban-text>Free Next Day Delivery Over €100</p>
      </div>
    </div>
</section>

<!--Category-->

<section class=" container-fluid category-list mt-5">
    <div class="col-12 text-center">
        <a href="{% url 'all_products2' %}" class="btn btn-hover">All</a>
        <a href="{% url 'menswatch' %}" class="btn btn-hover">Mens</a>
        <a href="{% url 'all_products2' %}" class="btn btn-hover">Ladies</a>
        <a href="{% url 'all_products2' %}" class="btn btn-hover">Kids</a>
        <div class="dropdown" style="display:inline-block">
        <a href="{% url 'all_products2' %}" class="btn dropbtn btn-hover">Brands</a>
        <div class="dropdown-content">
            <a href="{% url 'rolex' %}">Rolex</a>
            <a href="#">Link 2</a>
            <a href="#">Link 3</a>
            <a href="#">Link 2</a>
            <a href="#">Link 3</a>
        </div>
    </div>
</section>

<!--Product-showcase-->

<section class="products-showcase">
    <div class="container">
        <div class="row justify-content-center">
            <div class="card-deck">
        {% if not products %} 
                <div class="col-12 no-product">
                   <h5>Sorry, but we couldn't find anything to match your search.</h5>
                   <p>Please note that this does not necessarily mean that we do not have the product(s) you are looking for.</p>
                   <ul class="pl-0"><strong>We suggest:</strong></ul>
                    <li>Double check the spelling and try again.</li>
                    <li>Try using a less specific search term.</li>
                    <li>If you cannot find in search, please use the button below to browse all watches </li>
                    <div class="col-12 p-0 text-center">
                        <a href="{% url 'all_products2' %}" class="btn btn-cta btn-dark my-5">All Watches</a>
                    </div>
                </div>
             {% else %}
             {% for product in products %}
                 <div class="col-xs-12 col-md-4 col-lg-3 mx-auto">
                    <div class="card" style="width: 18rem;">

                        <!-- form to add/remove products to the favourites list -->
                        <form class="text-right fav-form" method="POST" action="{% url 'add_remove_favourites' product.id %}">
                            {% csrf_token %}
                            <button type="submit">
                                <!-- check if the product is already a favourite -->
                                {% if product in favourites %}
                                    <span class="favorited text-right"><i class="fa fa-heart"></i></span>
                                    TEST-01
                                {% else %}
                                    <span class="favorite text-right"><i class="fa fa-heart"></i></span>
                                    TEST-02
                                {% endif %}
                            </button>
                        </form>

                         <a href="{% url 'product_detail' product.id %}"  class="product-image">
                             <img class ="card-img" src="{{MEDIA_URL}}{{product.image}}" class="card-img-top product-image" alt="{{product.name}}" /></a>
                         <div class="card-body product-details">
                             <h6 class="card-title product-name"><a href="#"  class="product-title">{{ product.title }}</a></h6>
                         
                             <p class="product-price">€ {{ product.price }}</p>
                         </div>
                         <form method="post" action="{% url 'add_to_cart' product.id %}">
                         {% csrf_token %}
                         <div class="input-group add-cart">
                             <input class="input-add-checkout"  name="quantity" type="number" min="1" max="999" class="form-control" placeholder="Qty">
                             <span class="input-group-btn">
                                 <button class="btn btn-dark rounded-0 btn-sm" type="submit">Add to Cart</button>
                             </span>
                         </div>
                     </form>
                    </div>
                 </div>
                {% endfor %}
            {% endif %} 
            </div> 
        </div>
    </div>    
</section>  

<!--   Pagination to display 8 products per page   -->
        
        
<section class="pagination-cotainer my-4">
    <div class="container pb-4">
      <div class="row">
        <div class="col-12">
          <div class="pagination justify-content-center">
                    <span class="step-links">
                {% if products.has_previous %}
                <a class="pagination-space" href="?page=1">&laquo; first</a>
                <a class="pagination-space" href="?page={{ products.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current pagination-space">
                Page {{ products.number }} of {{ products.paginator.num_pages }}.
                </span> 
                {% if products.has_next %}
                <a class="pagination-space" href="?page={{ products.next_page_number }}">next</a>
                <a href="?page={{ products.paginator.num_pages }}">last &raquo;</a> {% endif %}
                </span>
            </div>
        </div>
     </div>
  </div>
</section>


            
     

{% endblock %}